!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.teFlow=r():t.teFlow=r()}(this,function(){return function(t){function r(e){if(n[e])return n[e].exports;var s=n[e]={exports:{},id:e,loaded:!1};return t[e].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}var n={};return r.m=t,r.c=n,r.p="",r(0)}([function(t,exports,r){"use strict";function n(t){return Array.isArray(t)?t:Array.from(t)}var e=Array.prototype.slice,s=r(1),i=r(2),o=r(3),u=r(4),a=r(5),f={init:function(){var t=this;if(this.args=[].concat(e.call(arguments)),this.argsToApply={_fnArgs:[]},!this.count){this.count=1;var r=this.checkOpts(this.args);this.args=r.args,this.argsToApply=r.argsToApply}this.first=this.args.length?this.args.shift():null,this.rest=this.args,this.firstIsFn=t._L.isFn(t.first),this.firstIsUdf=t._L.isUdf(t.first);var n=this.rest[this.rest.length-1];return!t._L.isUdf(n)&&n._fnArgs&&(this.argsToApply._fnArgs=this.rest.pop()._fnArgs),this.process()},checkOpts:function(t){var r=this,n=t[0],e=this._L.isFn(n)?!1:this._L.isObj(n),s=["_stream","_objReturn","_objKeep","_flow","_args","_flatten","_start","_res","_end","_option","_this"],i=!1;if(e){n=n._option?n._option:n;for(var o=Object.keys(n),u=0;u<o.length&&!i;u++)-1!==s.indexOf(o[u])&&(i=!0)}this.streamOpt=[];var a=function(t,e){return r._L.isUdf(n[t])?e:n[t]};if(this.optList={_stream:a("_stream",!0),_objReturn:a("_objReturn",!0),_objKeep:a("_objKeep",!1),_flow:a("_flow",!1),_flatten:a("_flatten",!1)},this.optStreamList={_start:null,_res:null,_end:null},e&&i){this._this=n._this?n._this:null;var f=function(t){return r._L.isFn(t)?t():Object.keys(t).reduce(function(n,e){var s=t[e];return n[e]=r._L.isFn(s)?s():t[e],n},{})};n._args?r.applyArgs(f(n._args),!0):n._initArgs&&r.applyArgs(f(n._initArgs),!0),this._memoize=n._memoize===!1?!1:!0,Object.keys(r.optStreamList).forEach(function(t){n[t]&&(r.streamOpt.push(t),null===r.optStreamList[t]&&(r.optStreamList[t]=n[t]))}),t.shift()}return{args:t,argsToApply:r.argsToApply}},applyOpts:function(t,r){var e=this,s=function(t,r){for(var s=!0;s;){var i=t,o=r;u=a=f=void 0,s=!1;var u=n(o),a=u[0],f=u.slice(1);if(void 0===i)return;if(e._L.isArr(i)||(i=[i]),void 0===a)return i;t=a.apply(e._this,i),r=f,s=!0}},i=function(t,r){var n=e._L.memoize(function(t){return s(t,r)}),i=e._memoize?n:s;return t.map(function(t){var n=i(t,r);return!e._L.isUdf(n)&&n[0]?n[0]:void 0})},o=function(t,r){return e._L.isFn(r)?i(t,r):e._L.isObj(r)?i(t,Object.keys(r).map(function(t){return r[t]})):e._L.isArr(r)?i(t,r):void 0},u=function(t,r,n){return n=n.filter(function(t){return"_start"!==t&&"_res"!==t&&"_end"!==t?t:"_start"===t&&r._start?t:"_res"===t&&r._res?t:"_end"===t&&r._end?t:void 0}),n.reduce(function(t,r){return o(t,e.optStreamList[r])},t)},a=function(t,r,n){var s={_start:!1,_end:!1,_res:!1};return u.apply(e,[t,e._L.defaults(r,s),n])};return this.streamOpt.length?a(t,r,this.streamOpt):t},applyArgs:function(t){var r=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],n=this,e=!1;if(void 0!==t){var s=function(t){if(n.optList._flow)n.argsToApply._fnArgs.push(t);else if(n.optList._objReturn&&n._L.isObj(t)){var r=n.optList._objKeep;r=e?!r:r,n.argsToApply._fnArgs=Object.keys(t).map(function(n){var e;return r&&(e={},e[n]=t[n]),r?e:t[n]})}else t=n._L.isArr(t)?t:[t],n.argsToApply._fnArgs=t};if(r)s(t);else{var i=function(t){return n._L.isUdf(t)||(t._this&&(n._this=t._this,delete t._this),n._L.isUdf(t._objKeep)||(e=!0,delete t._objKeep)),t};s(function(){if(!n._L.isArr(t)){t=[i(t)];var r=n.applyOpts(t,{_res:!0});return r[0]}return n.applyOpts(i(t),{_res:!0})}()),n.argsToApply._fnArgs=n.optList._flatten?n._L.flatten(n.argsToApply._fnArgs):n.argsToApply._fnArgs,n.argsToApply._fnArgs=n.applyOpts(n.argsToApply._fnArgs,{_end:!0})}}},process:function(){var t=this;if(this.firstIsFn){var r=Object.keys(this.argsToApply).length?this.first.apply(this._this,t.applyOpts(this.argsToApply._fnArgs,{_start:!0})):this.first.call(this._this);return t.applyArgs(r),Object.keys(this.argsToApply).length&&this.rest.push(this.argsToApply),this.init.apply(t,this.rest)}if(t._L.isObj(this.first)&&this.first["return"]){var n=this.first["return"];return this._L.isFn(n)?n.apply(t._this,this.argsToApply._fnArgs||[]):n}return t._L.isObj(this.first)&&this.first._fnArgs?this.first._fnArgs.length?this.first._fnArgs:void 0:this.firstIsFn||this.firstIsUdf||null===this.first?t._L.isUdf(this.first)&&this.rest.length?(Object.keys(this.argsToApply).length&&this.rest.push(this.argsToApply),this.init.apply(t,this.rest)):this.rest.length?void console.warn("teFlow ERROR: Your not supposed to get here, if you do drop me a line."):Object.keys(this.argsToApply).length?this.argsToApply._fnArgs:void 0:(t.applyArgs(this.first),Object.keys(this.argsToApply).length&&this.rest.push(this.argsToApply),this.init.apply(t,this.rest))},getThis:function(){return this},_L:{flatten:function p(t){var p=function r(t,n){for(var e=0;e<t.length;e++){var s=t[e];Array.isArray(s)?r(s,n):n.push(s)}return n};return p(t,[])},defaults:function(){var t=[].concat(e.call(arguments)),r=t.shift();return a(r,t)},memoize:function(t){return u(t)},isFn:function(t){return i(t)},isObj:function(t){return o(t)},isArr:function(t){return s(t)},isUdf:function(t){return void 0===t}}};t.exports=function(){var t=Object.create(f),r=t.getThis(),n=[].concat(e.call(arguments));return n.length?t.init.apply(r,n):void 0}},function(t,exports){function r(t){return!!t&&"object"==typeof t}function n(t,r){var n=null==t?void 0:t[r];return o(n)?n:void 0}function e(t){return"number"==typeof t&&t>-1&&t%1==0&&y>=t}function s(t){return i(t)&&h.call(t)==a}function i(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}function o(t){return null==t?!1:s(t)?_.test(c.call(t)):r(t)&&f.test(t)}var u="[object Array]",a="[object Function]",f=/^\[object .+?Constructor\]$/,p=Object.prototype,c=Function.prototype.toString,l=p.hasOwnProperty,h=p.toString,_=RegExp("^"+c.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),g=n(Array,"isArray"),y=9007199254740991,d=g||function(t){return r(t)&&e(t.length)&&h.call(t)==u};t.exports=d},function(t,exports){function r(t){return n(t)&&i.call(t)==e}function n(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}var e="[object Function]",s=Object.prototype,i=s.toString;t.exports=r},function(t,exports){function r(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}t.exports=r},function(t,exports){function r(){this.__data__={}}function n(t){return this.has(t)&&delete this.__data__[t]}function e(t){return"__proto__"==t?void 0:this.__data__[t]}function s(t){return"__proto__"!=t&&f.call(this.__data__,t)}function i(t,r){return"__proto__"!=t&&(this.__data__[t]=r),this}function o(t,r){if("function"!=typeof t||r&&"function"!=typeof r)throw new TypeError(u);var n=function(){var e=arguments,s=r?r.apply(this,e):e[0],i=n.cache;if(i.has(s))return i.get(s);var o=t.apply(this,e);return n.cache=i.set(s,o),o};return n.cache=new o.Cache,n}var u="Expected a function",a=Object.prototype,f=a.hasOwnProperty;r.prototype["delete"]=n,r.prototype.get=e,r.prototype.has=s,r.prototype.set=i,o.Cache=r,t.exports=o},function(t,exports,r){function n(t,r){return void 0===t?r:t}function e(t,r){return i(function(n){var e=n[0];return null==e?e:(n.push(r),t.apply(void 0,n))})}var s=r(6),i=r(15),o=e(s,n);t.exports=o},function(t,exports,r){function n(t,r,n){for(var e=-1,s=i(r),o=s.length;++e<o;){var u=s[e],a=t[u],f=n(a,r[u],u,t,r);(f===f?f===a:a!==a)&&(void 0!==a||u in t)||(t[u]=f)}return t}var e=r(7),s=r(12),i=r(9),o=s(function(t,r,s){return s?n(t,r,s):e(t,r)});t.exports=o},function(t,exports,r){function n(t,r){return null==r?t:e(r,s(r),t)}var e=r(8),s=r(9);t.exports=n},function(t,exports){function r(t,r,n){n||(n={});for(var e=-1,s=r.length;++e<s;){var i=r[e];n[i]=t[i]}return n}t.exports=r},function(t,exports,r){function n(t){return function(r){return null==r?void 0:r[t]}}function e(t){return null!=t&&i(d(t))}function s(t,r){return t="number"==typeof t||l.test(t)?+t:-1,r=null==r?y:r,t>-1&&t%1==0&&r>t}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&y>=t}function o(t){for(var r=a(t),n=r.length,e=n&&t.length,o=!!e&&i(e)&&(c(t)||p(t)),u=-1,f=[];++u<n;){var l=r[u];(o&&s(l,e)||_.call(t,l))&&f.push(l)}return f}function u(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}function a(t){if(null==t)return[];u(t)||(t=Object(t));var r=t.length;r=r&&i(r)&&(c(t)||p(t))&&r||0;for(var n=t.constructor,e=-1,o="function"==typeof n&&n.prototype===t,a=Array(r),f=r>0;++e<r;)a[e]=e+"";for(var l in t)f&&s(l,r)||"constructor"==l&&(o||!_.call(t,l))||a.push(l);return a}var f=r(10),p=r(11),c=r(1),l=/^\d+$/,h=Object.prototype,_=h.hasOwnProperty,g=f(Object,"keys"),y=9007199254740991,d=n("length"),v=g?function(t){var r=null==t?void 0:t.constructor;return"function"==typeof r&&r.prototype===t||"function"!=typeof t&&e(t)?o(t):u(t)?g(t):[]}:o;t.exports=v},function(t,exports){function r(t){return!!t&&"object"==typeof t}function n(t,r){var n=null==t?void 0:t[r];return i(n)?n:void 0}function e(t){return s(t)&&c.call(t)==o}function s(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}function i(t){return null==t?!1:e(t)?l.test(f.call(t)):r(t)&&u.test(t)}var o="[object Function]",u=/^\[object .+?Constructor\]$/,a=Object.prototype,f=Function.prototype.toString,p=a.hasOwnProperty,c=a.toString,l=RegExp("^"+f.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},function(t,exports){function r(t){return!!t&&"object"==typeof t}function n(t){return function(r){return null==r?void 0:r[t]}}function e(t){return null!=t&&s(p(t))}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&f>=t}function i(t){return r(t)&&e(t)&&u.call(t,"callee")&&!a.call(t,"callee")}var o=Object.prototype,u=o.hasOwnProperty,a=o.propertyIsEnumerable,f=9007199254740991,p=n("length");t.exports=i},function(t,exports,r){function n(t){return i(function(r,n){var i=-1,o=null==r?0:n.length,u=o>2?n[o-2]:void 0,a=o>2?n[2]:void 0,f=o>1?n[o-1]:void 0;for("function"==typeof u?(u=e(u,f,5),o-=2):(u="function"==typeof f?f:void 0,o-=u?1:0),a&&s(n[0],n[1],a)&&(u=3>o?void 0:u,o=1);++i<o;){var p=n[i];p&&t(r,p,u)}return r})}var e=r(13),s=r(14),i=r(15);t.exports=n},function(t,exports){function r(t,r,e){if("function"!=typeof t)return n;if(void 0===r)return t;switch(e){case 1:return function(n){return t.call(r,n)};case 3:return function(n,e,s){return t.call(r,n,e,s)};case 4:return function(n,e,s,i){return t.call(r,n,e,s,i)};case 5:return function(n,e,s,i,o){return t.call(r,n,e,s,i,o)}}return function(){return t.apply(r,arguments)}}function n(t){return t}t.exports=r},function(t,exports){function r(t){return function(r){return null==r?void 0:r[t]}}function n(t){return null!=t&&i(f(t))}function e(t,r){return t="number"==typeof t||u.test(t)?+t:-1,r=null==r?a:r,t>-1&&t%1==0&&r>t}function s(t,r,s){if(!o(s))return!1;var i=typeof r;if("number"==i?n(s)&&e(r,s.length):"string"==i&&r in s){var u=s[r];return t===t?t===u:u!==u}return!1}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&a>=t}function o(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}var u=/^\d+$/,a=9007199254740991,f=r("length");t.exports=s},function(t,exports){function r(t,r){if("function"!=typeof t)throw new TypeError(n);return r=e(void 0===r?t.length-1:+r||0,0),function(){for(var n=arguments,s=-1,i=e(n.length-r,0),o=Array(i);++s<i;)o[s]=n[r+s];switch(r){case 0:return t.call(this,o);case 1:return t.call(this,n[0],o);case 2:return t.call(this,n[0],n[1],o)}var u=Array(r+1);for(s=-1;++s<r;)u[s]=n[s];return u[r]=o,t.apply(this,u)}}var n="Expected a function",e=Math.max;t.exports=r}])});