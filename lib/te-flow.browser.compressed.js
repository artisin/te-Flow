!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.teFlow=r():t.teFlow=r()}(this,function(){return function(t){function r(e){if(n[e])return n[e].exports;var s=n[e]={exports:{},id:e,loaded:!1};return t[e].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}var n={};return r.m=t,r.c=n,r.p="",r(0)}([function(t,exports,r){"use strict";function n(t){return Array.isArray(t)?t:Array.from(t)}var e=Array.prototype.slice,s=r(1),o=r(2),i=r(3),u=r(4),a=r(5),f=r(16),p=f.defclass,c=p({constructor:function(t){var r=this;if(r._self=r,r.userOptions={},t){var n=["initArgs","args","this","stream","objReturn","objKeep","flow","flatten","start","res","end"];n.forEach(function(n){t[n]&&(r.userOptions[n]=t[n])}),t.memoize&&(r._memoize=t.memoize)}},init:function(){var t=this;if(t.args=[].concat(e.call(arguments)),t.argsToApply={_fnArgs:[]},!t.count){t.count=1;var r=t.checkOpts(t.args);t.args=r.args,t.argsToApply=r.argsToApply}t.first=t.args.length?t.args.shift():null,t.rest=t.args,t.firstIsFn=t._L.isFn(t.first),t.firstIsUdf=t._L.isUdf(t.first);var n=t.rest[t.rest.length-1];return!t._L.isUdf(n)&&n._fnArgs&&(t.argsToApply._fnArgs=t.rest.pop()._fnArgs),t.process()},checkOpts:function(t){var r=this,n=Object.keys(r.userOptions),e=t[0],s=r._L.isFn(e)?!1:r._L.isObj(e),o=["initArgs","args","this","stream","objReturn","objKeep","flow","flatten","start","res","end"],i=["_stream","_objReturn","_objKeep","_flow","_args","_flatten","_start","_res","_end","_option","_this"],u=!1;if(s){e=e._option?e._option:e;for(var a=Object.keys(e),f=0;f<a.length&&!u;f++)-1!==i.indexOf(a[f])&&(u=!0)}r.streamOpt=[];var p=function(t,n,s){return r.userOptions[o]?r.userOptions[o]:r._L.isUdf(e[n])?s:e[n]};if(r.optList={_stream:p("stream","_stream",!0),_objReturn:p("objReturn","_objReturn",!0),_objKeep:p("objKeep","_objKeep",!1),_flow:p("flow","_flow",!1),_flatten:p("flatten","_flatten",!1)},r.optStreamList={_start:p("start","_start",null),_res:p("res","_res",null),_end:p("end","_end",null)},s&&u||n.length){r.userOptions["this"]?r._this=r.userOptions["this"]:r._this=e._this?e._this:null;var c=function(t){return r._L.isFn(t)?t():Object.keys(t).reduce(function(n,e){var s=t[e];return n[e]=r._L.isFn(s)?s():t[e],n},{})};if(r.userOptions.initArgs||r.userOptions.args){var l=r.userOptions.args||r.userOptions.initArgs;r.applyArgs(c(l),!0)}else e._args?r.applyArgs(c(e._args),!0):e._initArgs&&r.applyArgs(c(e._initArgs),!0);r._memoize||(r._memoize=e._memoize===!1?!1:!0),Object.keys(r.optStreamList).forEach(function(t){e[t]&&(r.streamOpt.push(t),null===r.optStreamList[t]&&(r.optStreamList[t]=e[t]))}),n.length||t.shift()}return{args:t,argsToApply:r.argsToApply}},applyOpts:function(t,r){var e=this,s=function(t,r){for(var s=!0;s;){var o=t,i=r;u=a=f=void 0,s=!1;var u=n(i),a=u[0],f=u.slice(1);if(void 0===o)return;if(e._L.isArr(o)||(o=[o]),void 0===a)return o;t=a.apply(e._this,o),r=f,s=!0}},o=function(t,r){var n=e._L.memoize(function(t){return s(t,r)}),o=e._memoize?n:s;return t.map(function(t){var n=o(t,r);return!e._L.isUdf(n)&&n[0]?n[0]:void 0})},i=function(t,r){return e._L.isFn(r)?o(t,r):e._L.isObj(r)?o(t,Object.keys(r).map(function(t){return r[t]})):e._L.isArr(r)?o(t,r):void 0},u=function(t,r,n){return n=n.filter(function(t){return"_start"!==t&&"_res"!==t&&"_end"!==t?t:"_start"===t&&r._start?t:"_res"===t&&r._res?t:"_end"===t&&r._end?t:void 0}),n.reduce(function(t,r){return i(t,e.optStreamList[r])},t)},a=function(t,r,n){var s={_start:!1,_end:!1,_res:!1};return u.apply(e,[t,e._L.defaults(r,s),n])};return this.streamOpt.length?a(t,r,this.streamOpt):t},applyArgs:function(t){var r=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],n=this,e=!1;if(void 0!==t){var s=function(t){if(n.optList._flow)n.argsToApply._fnArgs.push(t);else if(n.optList._objReturn&&n._L.isObj(t)){var r=n.optList._objKeep;r=e?!r:r,n.argsToApply._fnArgs=Object.keys(t).map(function(n){var e;return r&&(e={},e[n]=t[n]),r?e:t[n]})}else t=n._L.isArr(t)?t:[t],n.argsToApply._fnArgs=t};if(r)s(t);else{var o=function(t){return n._L.isUdf(t)||(t._this&&(n._this=t._this,delete t._this),n._L.isUdf(t._objKeep)||(e=!0,delete t._objKeep)),t};s(function(){if(!n._L.isArr(t)){t=[o(t)];var r=n.applyOpts(t,{_res:!0});return r[0]}return n.applyOpts(o(t),{_res:!0})}()),n.argsToApply._fnArgs=n.optList._flatten?n._L.flatten(n.argsToApply._fnArgs):n.argsToApply._fnArgs,n.argsToApply._fnArgs=n.applyOpts(n.argsToApply._fnArgs,{_end:!0})}}},process:function(){var t=this;if(t.firstIsFn){var r=Object.keys(t.argsToApply).length?t.first.apply(t._this,t.applyOpts(t.argsToApply._fnArgs,{_start:!0})):t.first.call(t._this);return t.applyArgs(r),Object.keys(t.argsToApply).length&&t.rest.push(t.argsToApply),t.init.apply(t,t.rest)}if(t._L.isObj(t.first)&&t.first["return"]){var n=t.first["return"];return t._L.isFn(n)?n.apply(t._this,t.argsToApply._fnArgs||[]):n}return t._L.isObj(t.first)&&t.first._fnArgs?t.first._fnArgs.length?t.first._fnArgs:void 0:t.firstIsFn||t.firstIsUdf||null===t.first?t._L.isUdf(t.first)&&t.rest.length?(Object.keys(t.argsToApply).length&&t.rest.push(t.argsToApply),t.init.apply(t,t.rest)):t.rest.length?void console.error("teFlow ERROR: Your not supposed to get here, if you do drop me a line."):Object.keys(t.argsToApply).length?t.argsToApply._fnArgs:void 0:(t.applyArgs(t.first),Object.keys(t.argsToApply).length&&t.rest.push(t.argsToApply),t.init.apply(t,t.rest))},_L:{flatten:function l(t){var l=function r(t,n){for(var e=0;e<t.length;e++){var s=t[e];Array.isArray(s)?r(s,n):n.push(s)}return n};return l(t,[])},defaults:function(){var t=[].concat(e.call(arguments)),r=t.shift();return a(r,t)},memoize:function(t){return u(t)},isFn:function(t){return o(t)},isObj:function(t){return i(t)},isArr:function(t){return s(t)},isUdf:function(t){return void 0===t}}});t.exports=function(){var t=[].concat(e.call(arguments));if(!t.length)return void 0;var r=new c(this);return r.init.apply(r._self,t)}},function(t,exports){function r(t){return!!t&&"object"==typeof t}function n(t,r){var n=null==t?void 0:t[r];return i(n)?n:void 0}function e(t){return"number"==typeof t&&t>-1&&t%1==0&&h>=t}function s(t){return o(t)&&_.call(t)==a}function o(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}function i(t){return null==t?!1:s(t)?g.test(c.call(t)):r(t)&&f.test(t)}var u="[object Array]",a="[object Function]",f=/^\[object .+?Constructor\]$/,p=Object.prototype,c=Function.prototype.toString,l=p.hasOwnProperty,_=p.toString,g=RegExp("^"+c.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),y=n(Array,"isArray"),h=9007199254740991,d=y||function(t){return r(t)&&e(t.length)&&_.call(t)==u};t.exports=d},function(t,exports){function r(t){return n(t)&&o.call(t)==e}function n(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}var e="[object Function]",s=Object.prototype,o=s.toString;t.exports=r},function(t,exports){function r(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}t.exports=r},function(t,exports){function r(){this.__data__={}}function n(t){return this.has(t)&&delete this.__data__[t]}function e(t){return"__proto__"==t?void 0:this.__data__[t]}function s(t){return"__proto__"!=t&&f.call(this.__data__,t)}function o(t,r){return"__proto__"!=t&&(this.__data__[t]=r),this}function i(t,r){if("function"!=typeof t||r&&"function"!=typeof r)throw new TypeError(u);var n=function(){var e=arguments,s=r?r.apply(this,e):e[0],o=n.cache;if(o.has(s))return o.get(s);var i=t.apply(this,e);return n.cache=o.set(s,i),i};return n.cache=new i.Cache,n}var u="Expected a function",a=Object.prototype,f=a.hasOwnProperty;r.prototype["delete"]=n,r.prototype.get=e,r.prototype.has=s,r.prototype.set=o,i.Cache=r,t.exports=i},function(t,exports,r){function n(t,r){return void 0===t?r:t}function e(t,r){return o(function(n){var e=n[0];return null==e?e:(n.push(r),t.apply(void 0,n))})}var s=r(6),o=r(15),i=e(s,n);t.exports=i},function(t,exports,r){function n(t,r,n){for(var e=-1,s=o(r),i=s.length;++e<i;){var u=s[e],a=t[u],f=n(a,r[u],u,t,r);(f===f?f===a:a!==a)&&(void 0!==a||u in t)||(t[u]=f)}return t}var e=r(7),s=r(12),o=r(9),i=s(function(t,r,s){return s?n(t,r,s):e(t,r)});t.exports=i},function(t,exports,r){function n(t,r){return null==r?t:e(r,s(r),t)}var e=r(8),s=r(9);t.exports=n},function(t,exports){function r(t,r,n){n||(n={});for(var e=-1,s=r.length;++e<s;){var o=r[e];n[o]=t[o]}return n}t.exports=r},function(t,exports,r){function n(t){return function(r){return null==r?void 0:r[t]}}function e(t){return null!=t&&o(d(t))}function s(t,r){return t="number"==typeof t||l.test(t)?+t:-1,r=null==r?h:r,t>-1&&t%1==0&&r>t}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&h>=t}function i(t){for(var r=a(t),n=r.length,e=n&&t.length,i=!!e&&o(e)&&(c(t)||p(t)),u=-1,f=[];++u<n;){var l=r[u];(i&&s(l,e)||g.call(t,l))&&f.push(l)}return f}function u(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}function a(t){if(null==t)return[];u(t)||(t=Object(t));var r=t.length;r=r&&o(r)&&(c(t)||p(t))&&r||0;for(var n=t.constructor,e=-1,i="function"==typeof n&&n.prototype===t,a=Array(r),f=r>0;++e<r;)a[e]=e+"";for(var l in t)f&&s(l,r)||"constructor"==l&&(i||!g.call(t,l))||a.push(l);return a}var f=r(10),p=r(11),c=r(1),l=/^\d+$/,_=Object.prototype,g=_.hasOwnProperty,y=f(Object,"keys"),h=9007199254740991,d=n("length"),v=y?function(t){var r=null==t?void 0:t.constructor;return"function"==typeof r&&r.prototype===t||"function"!=typeof t&&e(t)?i(t):u(t)?y(t):[]}:i;t.exports=v},function(t,exports){function r(t){return!!t&&"object"==typeof t}function n(t,r){var n=null==t?void 0:t[r];return o(n)?n:void 0}function e(t){return s(t)&&c.call(t)==i}function s(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}function o(t){return null==t?!1:e(t)?l.test(f.call(t)):r(t)&&u.test(t)}var i="[object Function]",u=/^\[object .+?Constructor\]$/,a=Object.prototype,f=Function.prototype.toString,p=a.hasOwnProperty,c=a.toString,l=RegExp("^"+f.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},function(t,exports){function r(t){return!!t&&"object"==typeof t}function n(t){return function(r){return null==r?void 0:r[t]}}function e(t){return null!=t&&s(p(t))}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&f>=t}function o(t){return r(t)&&e(t)&&u.call(t,"callee")&&!a.call(t,"callee")}var i=Object.prototype,u=i.hasOwnProperty,a=i.propertyIsEnumerable,f=9007199254740991,p=n("length");t.exports=o},function(t,exports,r){function n(t){return o(function(r,n){var o=-1,i=null==r?0:n.length,u=i>2?n[i-2]:void 0,a=i>2?n[2]:void 0,f=i>1?n[i-1]:void 0;for("function"==typeof u?(u=e(u,f,5),i-=2):(u="function"==typeof f?f:void 0,i-=u?1:0),a&&s(n[0],n[1],a)&&(u=3>i?void 0:u,i=1);++o<i;){var p=n[o];p&&t(r,p,u)}return r})}var e=r(13),s=r(14),o=r(15);t.exports=n},function(t,exports){function r(t,r,e){if("function"!=typeof t)return n;if(void 0===r)return t;switch(e){case 1:return function(n){return t.call(r,n)};case 3:return function(n,e,s){return t.call(r,n,e,s)};case 4:return function(n,e,s,o){return t.call(r,n,e,s,o)};case 5:return function(n,e,s,o,i){return t.call(r,n,e,s,o,i)}}return function(){return t.apply(r,arguments)}}function n(t){return t}t.exports=r},function(t,exports){function r(t){return function(r){return null==r?void 0:r[t]}}function n(t){return null!=t&&o(f(t))}function e(t,r){return t="number"==typeof t||u.test(t)?+t:-1,r=null==r?a:r,t>-1&&t%1==0&&r>t}function s(t,r,s){if(!i(s))return!1;var o=typeof r;if("number"==o?n(s)&&e(r,s.length):"string"==o&&r in s){var u=s[r];return t===t?t===u:u!==u}return!1}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&a>=t}function i(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}var u=/^\d+$/,a=9007199254740991,f=r("length");t.exports=s},function(t,exports){function r(t,r){if("function"!=typeof t)throw new TypeError(n);return r=e(void 0===r?t.length-1:+r||0,0),function(){for(var n=arguments,s=-1,o=e(n.length-r,0),i=Array(o);++s<o;)i[s]=n[r+s];switch(r){case 0:return t.call(this,i);case 1:return t.call(this,n[0],i);case 2:return t.call(this,n[0],n[1],i)}var u=Array(r+1);for(s=-1;++s<r;)u[s]=n[s];return u[r]=i,t.apply(this,u)}}var n="Expected a function",e=Math.max;t.exports=r},function(t,exports,r){var n,e;!function(s,o){n=o,e="function"==typeof n?n.call(exports,r,exports,t):n,!(void 0!==e&&(t.exports=e))}(this,function(){"use strict";var t=function(){},r=Array.prototype.slice,n=function(n,e){var s=t.prototype="function"==typeof n?n.prototype:n,o=new t,i=e.apply(o,r.call(arguments,2).concat(s));if("object"==typeof i)for(var u in i)o[u]=i[u];if(!o.hasOwnProperty("constructor"))return o;var a=o.constructor;return a.prototype=o,a};return n.defclass=function(t){var r=t.constructor;return r.prototype=t,r},n.extend=function(t,r){return n(t,function(t){return this.uber=t,r})},n})}])});