!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.teFlow=r():t.teFlow=r()}(this,function(){return function(t){function r(e){if(n[e])return n[e].exports;var o=n[e]={exports:{},id:e,loaded:!1};return t[e].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var n={};return r.m=t,r.c=n,r.p="",r(0)}([function(t,exports,r){"use strict";function n(t){return Array.isArray(t)?t:Array.from(t)}var e=Array.prototype.slice,o=r(1),i=r(2),s=r(3),u=r(4),f=r(5),a=r(16),p=a({constructor:function(t){var r=this;if(r._self=r,r.userOptions={},t){var n=["initArgs","args","this","stream","objReturn","objKeep","flow","flatten","start","res","end"];n.forEach(function(n){r._L.isUdf(t[n])||(r.userOptions[n]=t[n])}),r._L.isUdf(t.memoize)||(r._memoize=t.memoize)}},invoke:function(){var t=this;if(t.args=[].concat(e.call(arguments)),t.argsToApply={_fnArgs:[]},!t.count){t.count=1;var r=t.checkOpts(t.args);t.args=r.args,t.argsToApply=r.argsToApply}t.first=t.args.length?t.args.shift():null,t.rest=t.args,t.firstIsFn=t._L.isFn(t.first),t.firstIsUdf=t._L.isUdf(t.first);var n=t.rest[t.rest.length-1];return!t._L.isUdf(n)&&n._fnArgs&&(t.argsToApply._fnArgs=t.rest.pop()._fnArgs),t.process()},checkOpts:function(t){var r=this,n=Object.keys(r.userOptions),e=t[0],o=r._L.isFn(e)?!1:r._L.isObj(e),i=["_stream","_objReturn","_objKeep","_flow","_args","_flatten","_start","_res","_end","_option","_this"],s=!1;if(o){e=e._option?e._option:e;for(var u=Object.keys(e),f=0;f<u.length&&!s;f++)-1!==i.indexOf(u[f])&&(s=!0)}r.streamOpt=[];var a=function(t,n,o){return r._L.isUdf(r.userOptions[t])?r._L.isUdf(e[n])?o:e[n]:r.userOptions[t]};if(r.optList={_kill:a("kill","_kill",!1),_return:a("return","_return",!1),_stream:a("stream","_stream",!0),_objReturn:a("objReturn","_objReturn",!0),_objKeep:a("objKeep","_objKeep",!1),_flow:a("flow","_flow",!1),_flatten:a("flatten","_flatten",!1)},r.optStreamList={_start:a("start","_start",null),_res:a("res","_res",null),_end:a("end","_end",null)},o&&s||n.length){r.userOptions["this"]?r._this=r.userOptions["this"]:r._this=e._this?e._this:null;var p=function(t){return r._L.isFn(t)?t():Object.keys(t).reduce(function(n,e){var o=t[e];return n[e]=r._L.isFn(o)?o():t[e],n},{})};if(r.userOptions.initArgs||r.userOptions.args){var c=r.userOptions.args||r.userOptions.initArgs;r.applyArgs(p(c),!0)}else e._args?r.applyArgs(p(e._args),!0):e._initArgs&&r.applyArgs(p(e._initArgs),!0);r._memoize||(r._memoize=e._memoize===!1?!1:!0),Object.keys(r.optStreamList).forEach(function(t){e[t]&&(r.streamOpt.push(t),null===r.optStreamList[t]&&(r.optStreamList[t]=e[t]))}),n.length||t.shift()}return{args:t,argsToApply:r.argsToApply}},applyOpts:function(t,r){var e=this,o=function(t,r){for(var o=!0;o;){var i=t,s=r;o=!1;var u=n(s),f=u[0],a=u.slice(1);if(void 0===i)return;if(e._L.isArr(i)||(i=[i]),void 0===f)return i;t=f.apply(e._this,i),r=a,o=!0,u=f=a=void 0}},i=function(t,r){var n=e._L.memoize(function(t){return o(t,r)}),i=e._memoize?n:o;return t.map(function(t){var n=i(t,r);return!e._L.isUdf(n)&&n[0]?n[0]:void 0})},s=function(t,r){return e._L.isFn(r)?i(t,r):e._L.isObj(r)?i(t,Object.keys(r).map(function(t){return r[t]})):e._L.isArr(r)?i(t,r):void 0},u=function(t,r,n){return n=n.filter(function(t){return"_start"!==t&&"_res"!==t&&"_end"!==t?t:"_start"===t&&r._start?t:"_res"===t&&r._res?t:"_end"===t&&r._end?t:void 0}),n.reduce(function(t,r){return s(t,e.optStreamList[r])},t)},f=function(t,r,n){var o={_start:!1,_end:!1,_res:!1};return u.apply(e,[t,e._L.defaults(r,o),n])};return this.streamOpt.length?f(t,r,this.streamOpt):t},applyArgs:function(t){var r=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],n=this,e=!1;if(void 0!==t){var o=function(t){if(n.optList._flow)n.argsToApply._fnArgs.push(t);else if(n.optList._objReturn&&n._L.isObj(t)){var r=n.optList._objKeep;r=e?!r:r,n.argsToApply._fnArgs=Object.keys(t).map(function(n){var e;return r&&(e={},e[n]=t[n]),r?e:t[n]})}else t=n._L.isArr(t)?t:[t],n.argsToApply._fnArgs=t};if(r)o(t);else{var i=function(t){return n._L.isUdf(t)||(t._this&&(n._this=t._this,delete t._this),n._L.isUdf(t._objKeep)||(e=!0,delete t._objKeep),t._kill===!0&&(n.optList._kill=!0,delete t._kill),t._return===!0&&(n.optList._return=!0,delete t._return)),t};o(function(){if(!n._L.isArr(t)){t=[i(t)];var r=n.applyOpts(t,{_res:!0});return r[0]}return n.applyOpts(i(t),{_res:!0})}()),n.argsToApply._fnArgs=n.optList._flatten?n._L.flatten(n.argsToApply._fnArgs):n.argsToApply._fnArgs,n.argsToApply._fnArgs=n.applyOpts(n.argsToApply._fnArgs,{_end:!0})}}},process:function(){var t=this;if(!t.optList._kill){if(t.optList._return)return t.argsToApply._fnArgs||[];if(t.firstIsFn){var r=Object.keys(t.argsToApply).length?t.first.apply(t._this,t.applyOpts(t.argsToApply._fnArgs,{_start:!0})):t.first.call(t._this);return t.applyArgs(r),Object.keys(t.argsToApply).length&&t.rest.push(t.argsToApply),t.invoke.apply(t,t.rest)}if(t._L.isObj(t.first)&&t.first["return"]){var n=t.first["return"];return t._L.isFn(n)?n.apply(t._this,t.argsToApply._fnArgs||[]):n}return t._L.isObj(t.first)&&t.first._fnArgs?t.first._fnArgs.length?t.first._fnArgs:void 0:t.firstIsFn||t.firstIsUdf||null===t.first?t._L.isUdf(t.first)&&t.rest.length?(Object.keys(t.argsToApply).length&&t.rest.push(t.argsToApply),t.invoke.apply(t,t.rest)):t.rest.length?void console.error("teFlow ERROR: Your not supposed to get here, if you do drop me a line."):Object.keys(t.argsToApply).length?t.argsToApply._fnArgs:void 0:(t.applyArgs(t.first),Object.keys(t.argsToApply).length&&t.rest.push(t.argsToApply),t.invoke.apply(t,t.rest))}},_L:{flatten:function c(t){var c=function r(t,n){for(var e=0;e<t.length;e++){var o=t[e];Array.isArray(o)?r(o,n):n.push(o)}return n};return c(t,[])},defaults:function(){var t=[].concat(e.call(arguments)),r=t.shift();return f(r,t)},memoize:function(t){return u(t)},isFn:function(t){return i(t)},isObj:function(t){return s(t)},isArr:function(t){return o(t)},isUdf:function(t){return void 0===t}}});t.exports=function(){var t=[].concat(e.call(arguments));if(t.length){var r=new p(this);return r.invoke.apply(r._self,t)}}},function(t,exports){function r(t){return!!t&&"object"==typeof t}function n(t,r){var n=null==t?void 0:t[r];return s(n)?n:void 0}function e(t){return"number"==typeof t&&t>-1&&t%1==0&&v>=t}function o(t){return i(t)&&_.call(t)==f}function i(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}function s(t){return null==t?!1:o(t)?y.test(c.call(t)):r(t)&&a.test(t)}var u="[object Array]",f="[object Function]",a=/^\[object .+?Constructor\]$/,p=Object.prototype,c=Function.prototype.toString,l=p.hasOwnProperty,_=p.toString,y=RegExp("^"+c.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),g=n(Array,"isArray"),v=9007199254740991,h=g||function(t){return r(t)&&e(t.length)&&_.call(t)==u};t.exports=h},function(t,exports){function r(t){return n(t)&&i.call(t)==e}function n(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}var e="[object Function]",o=Object.prototype,i=o.toString;t.exports=r},function(t,exports){function r(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}t.exports=r},function(t,exports){function r(){this.__data__={}}function n(t){return this.has(t)&&delete this.__data__[t]}function e(t){return"__proto__"==t?void 0:this.__data__[t]}function o(t){return"__proto__"!=t&&a.call(this.__data__,t)}function i(t,r){return"__proto__"!=t&&(this.__data__[t]=r),this}function s(t,r){if("function"!=typeof t||r&&"function"!=typeof r)throw new TypeError(u);var n=function(){var e=arguments,o=r?r.apply(this,e):e[0],i=n.cache;if(i.has(o))return i.get(o);var s=t.apply(this,e);return n.cache=i.set(o,s),s};return n.cache=new s.Cache,n}var u="Expected a function",f=Object.prototype,a=f.hasOwnProperty;r.prototype["delete"]=n,r.prototype.get=e,r.prototype.has=o,r.prototype.set=i,s.Cache=r,t.exports=s},function(t,exports,r){function n(t,r){return void 0===t?r:t}function e(t,r){return i(function(n){var e=n[0];return null==e?e:(n.push(r),t.apply(void 0,n))})}var o=r(6),i=r(15),s=e(o,n);t.exports=s},function(t,exports,r){function n(t,r,n){for(var e=-1,o=i(r),s=o.length;++e<s;){var u=o[e],f=t[u],a=n(f,r[u],u,t,r);(a===a?a===f:f!==f)&&(void 0!==f||u in t)||(t[u]=a)}return t}var e=r(7),o=r(12),i=r(9),s=o(function(t,r,o){return o?n(t,r,o):e(t,r)});t.exports=s},function(t,exports,r){function n(t,r){return null==r?t:e(r,o(r),t)}var e=r(8),o=r(9);t.exports=n},function(t,exports){function r(t,r,n){n||(n={});for(var e=-1,o=r.length;++e<o;){var i=r[e];n[i]=t[i]}return n}t.exports=r},function(t,exports,r){function n(t){return function(r){return null==r?void 0:r[t]}}function e(t){return null!=t&&i(h(t))}function o(t,r){return t="number"==typeof t||l.test(t)?+t:-1,r=null==r?v:r,t>-1&&t%1==0&&r>t}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&v>=t}function s(t){for(var r=f(t),n=r.length,e=n&&t.length,s=!!e&&i(e)&&(c(t)||p(t)),u=-1,a=[];++u<n;){var l=r[u];(s&&o(l,e)||y.call(t,l))&&a.push(l)}return a}function u(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}function f(t){if(null==t)return[];u(t)||(t=Object(t));var r=t.length;r=r&&i(r)&&(c(t)||p(t))&&r||0;for(var n=t.constructor,e=-1,s="function"==typeof n&&n.prototype===t,f=Array(r),a=r>0;++e<r;)f[e]=e+"";for(var l in t)a&&o(l,r)||"constructor"==l&&(s||!y.call(t,l))||f.push(l);return f}var a=r(10),p=r(11),c=r(1),l=/^\d+$/,_=Object.prototype,y=_.hasOwnProperty,g=a(Object,"keys"),v=9007199254740991,h=n("length"),d=g?function(t){var r=null==t?void 0:t.constructor;return"function"==typeof r&&r.prototype===t||"function"!=typeof t&&e(t)?s(t):u(t)?g(t):[]}:s;t.exports=d},function(t,exports){function r(t){return!!t&&"object"==typeof t}function n(t,r){var n=null==t?void 0:t[r];return i(n)?n:void 0}function e(t){return o(t)&&c.call(t)==s}function o(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}function i(t){return null==t?!1:e(t)?l.test(a.call(t)):r(t)&&u.test(t)}var s="[object Function]",u=/^\[object .+?Constructor\]$/,f=Object.prototype,a=Function.prototype.toString,p=f.hasOwnProperty,c=f.toString,l=RegExp("^"+a.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},function(t,exports){function r(t){return!!t&&"object"==typeof t}function n(t){return function(r){return null==r?void 0:r[t]}}function e(t){return null!=t&&o(p(t))}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&a>=t}function i(t){return r(t)&&e(t)&&u.call(t,"callee")&&!f.call(t,"callee")}var s=Object.prototype,u=s.hasOwnProperty,f=s.propertyIsEnumerable,a=9007199254740991,p=n("length");t.exports=i},function(t,exports,r){function n(t){return i(function(r,n){var i=-1,s=null==r?0:n.length,u=s>2?n[s-2]:void 0,f=s>2?n[2]:void 0,a=s>1?n[s-1]:void 0;for("function"==typeof u?(u=e(u,a,5),s-=2):(u="function"==typeof a?a:void 0,s-=u?1:0),f&&o(n[0],n[1],f)&&(u=3>s?void 0:u,s=1);++i<s;){var p=n[i];p&&t(r,p,u)}return r})}var e=r(13),o=r(14),i=r(15);t.exports=n},function(t,exports){function r(t,r,e){if("function"!=typeof t)return n;if(void 0===r)return t;switch(e){case 1:return function(n){return t.call(r,n)};case 3:return function(n,e,o){return t.call(r,n,e,o)};case 4:return function(n,e,o,i){return t.call(r,n,e,o,i)};case 5:return function(n,e,o,i,s){return t.call(r,n,e,o,i,s)}}return function(){return t.apply(r,arguments)}}function n(t){return t}t.exports=r},function(t,exports){function r(t){return function(r){return null==r?void 0:r[t]}}function n(t){return null!=t&&i(a(t))}function e(t,r){return t="number"==typeof t||u.test(t)?+t:-1,r=null==r?f:r,t>-1&&t%1==0&&r>t}function o(t,r,o){if(!s(o))return!1;var i=typeof r;if("number"==i?n(o)&&e(r,o.length):"string"==i&&r in o){var u=o[r];return t===t?t===u:u!==u}return!1}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&f>=t}function s(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}var u=/^\d+$/,f=9007199254740991,a=r("length");t.exports=o},function(t,exports){function r(t,r){if("function"!=typeof t)throw new TypeError(n);return r=e(void 0===r?t.length-1:+r||0,0),function(){for(var n=arguments,o=-1,i=e(n.length-r,0),s=Array(i);++o<i;)s[o]=n[r+o];switch(r){case 0:return t.call(this,s);case 1:return t.call(this,n[0],s);case 2:return t.call(this,n[0],n[1],s)}var u=Array(r+1);for(o=-1;++o<r;)u[o]=n[o];return u[r]=s,t.apply(this,u)}}var n="Expected a function",e=Math.max;t.exports=r},function(t,exports,r){!function(r,n){t.exports=n()}(this,function(){return function(t){function r(e){if(n[e])return n[e].exports;var o=n[e]={exports:{},id:e,loaded:!1};return t[e].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var n={};return r.m=t,r.c=n,r.p="",r(0)}([function(t,exports){"use strict";var r=function(t){var r=t.constructor;return r.prototype=t,r};r.extend=function(t,n){var e=Object.create(t.prototype);for(var o in n)e[o]=n[o];return r(e)},t.exports=r}])})}])});