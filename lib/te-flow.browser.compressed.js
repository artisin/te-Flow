!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.teFlow=r():t.teFlow=r()}(this,function(){return function(t){function r(s){if(n[s])return n[s].exports;var i=n[s]={exports:{},id:s,loaded:!1};return t[s].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}var n={};return r.m=t,r.c=n,r.p="",r(0)}([function(t,exports,r){"use strict";function n(t){return Array.isArray(t)?t:Array.from(t)}var s=Array.prototype.slice,i=r(1),e=r(2),o=r(3),u=r(4),a=r(5),p={init:function(){var t=this;if(this.args=[].concat(s.call(arguments)),this.argsToApply={_fnArgs:[]},!this.count){this.count=1;var r=this.checkOpts(this.args);this.args=r.args,this.argsToApply=r.argsToApply}this.first=this.args.length?this.args.shift():null,this.rest=this.args,this.firstIsFn=t._h.isFn(t.first),this.firstIsUdf=t._h.isUdf(t.first);var n=this.rest[this.rest.length-1];return!t._h.isUdf(n)&&n._fnArgs&&(this.argsToApply._fnArgs=this.rest.pop()._fnArgs),this.process()},checkOpts:function(t){var r=this,n=t[0],s=this._h.isFn(n)?!1:this._h.isObj(n);this.streamOpt=[];var i=function(t,s){return r._h.isUdf(n[t])?s:n[t]};return this.optList={_stream:i("_stream",!0),_objApply:i("_objApply",!0),_flow:i("_flow",!1),_flatten:i("_flatten",!1)},this.optStreamList={_start:null,_res:null,_end:null},s&&(n=n._option?n._option:n,this._this=n._this?n._this:null,n._args?r.applyArgs(n._args,!0):n._initArgs&&r.applyArgs(n._initArgs,!0),this._memoize=n._memoize===!1?!1:!0,Object.keys(r.optStreamList).forEach(function(t){n[t]&&(r.streamOpt.push(t),null===r.optStreamList[t]&&(r.optStreamList[t]=n[t]))}),t.shift()),{args:t,argsToApply:r.argsToApply}},applyOpts:function(t,r){var s=this,i=function(t,r){for(var i=!0;i;){var e=t,o=r;u=a=p=void 0,i=!1;var u=n(o),a=u[0],p=u.slice(1);if(void 0===e)return;if(s._h.isArr(e)||(e=[e]),void 0===a)return e;t=a.apply(s._this,e),r=p,i=!0}},e=function(t,r){var n=s._h.memoize(function(t){return i(t,r)}),e=s._memoize?n:i;return t.filter(function(t){var n=e(t,r);return!s._h.isUdf(n)&&n[0]?n[0]:void 0})},o=function(t,r){return s._h.isFn(r)?e(t,r):s._h.isObj(r)?e(t,Object.keys(r).map(function(t){return r[t]})):s._h.isArr(r)?e(t,r):void 0},u=function(t,r,n){return n=n.filter(function(t){return"_start"!==t&&"_res"!==t&&"_end"!==t?t:"_start"===t&&r._start?t:"_res"===t&&r._res?t:"_end"===t&&r._end?t:void 0}),n.reduce(function(t,r){return o(t,s.optList[r])},t)},a=function(t,r,n){var i={_start:!1,_end:!1,_res:!1};return u.apply(s,[t,s._h.defaults(r,i),n])};return this.streamOpt.length?a(t,r,this.streamOpt):t},applyArgs:function(t){var r=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],n=this;if(void 0!==t){var s=function(t){n.optList._flow?n.argsToApply._fnArgs.push(t):n.optList._objApply&&n._h.isObj(t)?n.argsToApply._fnArgs=Object.keys(t).map(function(r){return t[r]}):(t=n._h.isArr(t)?t:[t],n.argsToApply._fnArgs=t)};if(r)s(t);else{var i=function(t){return!n._h.isUdf(t)&&t._this&&(n._this=t._this,delete t._this),t};s(n.applyOpts(i(t),{_res:!0})),n.argsToApply._fnArgs=n.optList._flatten?n._h.flatten(n.argsToApply._fnArgs):n.argsToApply._fnArgs,n.argsToApply._fnArgs=n.applyOpts(n.argsToApply._fnArgs,{_end:!0})}}},process:function(){var t=this;if(this.firstIsFn){var r=Object.keys(this.argsToApply).length?this.first.apply(this._this,t.applyOpts(this.argsToApply._fnArgs,{_start:!0})):this.first.call(this._this);return t.applyArgs(r),Object.keys(this.argsToApply).length&&this.rest.push(this.argsToApply),this.init.apply(t,this.rest)}if(t._h.isObj(this.first)&&this.first["return"]){var n=this.first["return"];return this._h.isFn(n)?n.apply(t._this,this.argsToApply._fnArgs||[]):n}return t._h.isObj(this.first)&&this.first._fnArgs?this.first._fnArgs.length?this.first._fnArgs:void 0:this.firstIsFn||this.firstIsUdf||null===this.first?t._h.isUdf(this.first)&&this.rest.length?(Object.keys(this.argsToApply).length&&this.rest.push(this.argsToApply),this.init.apply(t,this.rest)):this.rest.length?void console.warn("teFlow ERROR: Your not supposed to get here, if you do drop me a line."):Object.keys(this.argsToApply).length?this.argsToApply._fnArgs:void 0:(t.applyArgs(this.first),Object.keys(this.argsToApply).length&&this.rest.push(this.argsToApply),this.init.apply(t,this.rest))},getThis:function(){return this},_h:{flatten:function f(t){var f=function r(t,n){for(var s=0;s<t.length;s++){var i=t[s];Array.isArray(i)?r(i,n):n.push(i)}return n};return f(t,[])},defaults:function(){var t=[].concat(s.call(arguments)),r=t.shift();return a(r,t)},memoize:function(t){return u(t)},isFn:function(t){return e(t)},isObj:function(t){return o(t)},isArr:function(t){return i(t)},isUdf:function(t){return void 0===t}}};t.exports=function(){var t=Object.create(p),r=t.getThis(),n=[].concat(s.call(arguments));return n.length?t.init.apply(r,n):void 0}},function(t,exports){function r(t){return!!t&&"object"==typeof t}function n(t,r){var n=null==t?void 0:t[r];return o(n)?n:void 0}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&y>=t}function i(t){return e(t)&&c.call(t)==a}function e(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}function o(t){return null==t?!1:i(t)?_.test(h.call(t)):r(t)&&p.test(t)}var u="[object Array]",a="[object Function]",p=/^\[object .+?Constructor\]$/,f=Object.prototype,h=Function.prototype.toString,l=f.hasOwnProperty,c=f.toString,_=RegExp("^"+h.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),g=n(Array,"isArray"),y=9007199254740991,d=g||function(t){return r(t)&&s(t.length)&&c.call(t)==u};t.exports=d},function(t,exports){function r(t){return n(t)&&e.call(t)==s}function n(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}var s="[object Function]",i=Object.prototype,e=i.toString;t.exports=r},function(t,exports){function r(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}t.exports=r},function(t,exports){function r(){this.__data__={}}function n(t){return this.has(t)&&delete this.__data__[t]}function s(t){return"__proto__"==t?void 0:this.__data__[t]}function i(t){return"__proto__"!=t&&p.call(this.__data__,t)}function e(t,r){return"__proto__"!=t&&(this.__data__[t]=r),this}function o(t,r){if("function"!=typeof t||r&&"function"!=typeof r)throw new TypeError(u);var n=function(){var s=arguments,i=r?r.apply(this,s):s[0],e=n.cache;if(e.has(i))return e.get(i);var o=t.apply(this,s);return n.cache=e.set(i,o),o};return n.cache=new o.Cache,n}var u="Expected a function",a=Object.prototype,p=a.hasOwnProperty;r.prototype["delete"]=n,r.prototype.get=s,r.prototype.has=i,r.prototype.set=e,o.Cache=r,t.exports=o},function(t,exports,r){function n(t,r){return void 0===t?r:t}function s(t,r){return e(function(n){var s=n[0];return null==s?s:(n.push(r),t.apply(void 0,n))})}var i=r(6),e=r(15),o=s(i,n);t.exports=o},function(t,exports,r){function n(t,r,n){for(var s=-1,i=e(r),o=i.length;++s<o;){var u=i[s],a=t[u],p=n(a,r[u],u,t,r);(p===p?p===a:a!==a)&&(void 0!==a||u in t)||(t[u]=p)}return t}var s=r(7),i=r(12),e=r(9),o=i(function(t,r,i){return i?n(t,r,i):s(t,r)});t.exports=o},function(t,exports,r){function n(t,r){return null==r?t:s(r,i(r),t)}var s=r(8),i=r(9);t.exports=n},function(t,exports){function r(t,r,n){n||(n={});for(var s=-1,i=r.length;++s<i;){var e=r[s];n[e]=t[e]}return n}t.exports=r},function(t,exports,r){function n(t){return function(r){return null==r?void 0:r[t]}}function s(t){return null!=t&&e(d(t))}function i(t,r){return t="number"==typeof t||l.test(t)?+t:-1,r=null==r?y:r,t>-1&&t%1==0&&r>t}function e(t){return"number"==typeof t&&t>-1&&t%1==0&&y>=t}function o(t){for(var r=a(t),n=r.length,s=n&&t.length,o=!!s&&e(s)&&(h(t)||f(t)),u=-1,p=[];++u<n;){var l=r[u];(o&&i(l,s)||_.call(t,l))&&p.push(l)}return p}function u(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}function a(t){if(null==t)return[];u(t)||(t=Object(t));var r=t.length;r=r&&e(r)&&(h(t)||f(t))&&r||0;for(var n=t.constructor,s=-1,o="function"==typeof n&&n.prototype===t,a=Array(r),p=r>0;++s<r;)a[s]=s+"";for(var l in t)p&&i(l,r)||"constructor"==l&&(o||!_.call(t,l))||a.push(l);return a}var p=r(10),f=r(11),h=r(1),l=/^\d+$/,c=Object.prototype,_=c.hasOwnProperty,g=p(Object,"keys"),y=9007199254740991,d=n("length"),v=g?function(t){var r=null==t?void 0:t.constructor;return"function"==typeof r&&r.prototype===t||"function"!=typeof t&&s(t)?o(t):u(t)?g(t):[]}:o;t.exports=v},function(t,exports){function r(t){return!!t&&"object"==typeof t}function n(t,r){var n=null==t?void 0:t[r];return e(n)?n:void 0}function s(t){return i(t)&&h.call(t)==o}function i(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}function e(t){return null==t?!1:s(t)?l.test(p.call(t)):r(t)&&u.test(t)}var o="[object Function]",u=/^\[object .+?Constructor\]$/,a=Object.prototype,p=Function.prototype.toString,f=a.hasOwnProperty,h=a.toString,l=RegExp("^"+p.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},function(t,exports){function r(t){return!!t&&"object"==typeof t}function n(t){return function(r){return null==r?void 0:r[t]}}function s(t){return null!=t&&i(f(t))}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&p>=t}function e(t){return r(t)&&s(t)&&u.call(t,"callee")&&!a.call(t,"callee")}var o=Object.prototype,u=o.hasOwnProperty,a=o.propertyIsEnumerable,p=9007199254740991,f=n("length");t.exports=e},function(t,exports,r){function n(t){return e(function(r,n){var e=-1,o=null==r?0:n.length,u=o>2?n[o-2]:void 0,a=o>2?n[2]:void 0,p=o>1?n[o-1]:void 0;for("function"==typeof u?(u=s(u,p,5),o-=2):(u="function"==typeof p?p:void 0,o-=u?1:0),a&&i(n[0],n[1],a)&&(u=3>o?void 0:u,o=1);++e<o;){var f=n[e];f&&t(r,f,u)}return r})}var s=r(13),i=r(14),e=r(15);t.exports=n},function(t,exports){function r(t,r,s){if("function"!=typeof t)return n;if(void 0===r)return t;switch(s){case 1:return function(n){return t.call(r,n)};case 3:return function(n,s,i){return t.call(r,n,s,i)};case 4:return function(n,s,i,e){return t.call(r,n,s,i,e)};case 5:return function(n,s,i,e,o){return t.call(r,n,s,i,e,o)}}return function(){return t.apply(r,arguments)}}function n(t){return t}t.exports=r},function(t,exports){function r(t){return function(r){return null==r?void 0:r[t]}}function n(t){return null!=t&&e(p(t))}function s(t,r){return t="number"==typeof t||u.test(t)?+t:-1,r=null==r?a:r,t>-1&&t%1==0&&r>t}function i(t,r,i){if(!o(i))return!1;var e=typeof r;if("number"==e?n(i)&&s(r,i.length):"string"==e&&r in i){var u=i[r];return t===t?t===u:u!==u}return!1}function e(t){return"number"==typeof t&&t>-1&&t%1==0&&a>=t}function o(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}var u=/^\d+$/,a=9007199254740991,p=r("length");t.exports=i},function(t,exports){function r(t,r){if("function"!=typeof t)throw new TypeError(n);return r=s(void 0===r?t.length-1:+r||0,0),function(){for(var n=arguments,i=-1,e=s(n.length-r,0),o=Array(e);++i<e;)o[i]=n[r+i];switch(r){case 0:return t.call(this,o);case 1:return t.call(this,n[0],o);case 2:return t.call(this,n[0],n[1],o)}var u=Array(r+1);for(i=-1;++i<r;)u[i]=n[i];return u[r]=o,t.apply(this,u)}}var n="Expected a function",s=Math.max;t.exports=r}])});