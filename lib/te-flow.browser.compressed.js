!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.teFlow=r():t.teFlow=r()}(this,function(){return function(t){function r(s){if(n[s])return n[s].exports;var e=n[s]={exports:{},id:s,loaded:!1};return t[s].call(e.exports,e,e.exports,r),e.loaded=!0,e.exports}var n={};return r.m=t,r.c=n,r.p="",r(0)}([function(t,exports,r){"use strict";function n(t){return Array.isArray(t)?t:Array.from(t)}var s=Array.prototype.slice,e=r(1),i=r(2),o=r(3),u=r(4),a=r(5),f={init:function(){var t=this;if(this.args=[].concat(s.call(arguments)),this.argsToApply={_fnArgs:[]},!this.count){this.count=1;var r=this.checkOpts(this.args);this.args=r.args,this.argsToApply=r.argsToApply}this.first=this.args.length?this.args.shift():null,this.rest=this.args,this.firstIsFn=t._h.isFn(t.first),this.firstIsUdf=t._h.isUdf(t.first);var n=this.rest[this.rest.length-1];return!t._h.isUdf(n)&&n._fnArgs&&(this.argsToApply._fnArgs=this.rest.pop()._fnArgs),this.process()},checkOpts:function(t){var r=this,n=t[0],s=this._h.isFn(n)?!1:this._h.isObj(n);this.streamOpt=[];var e=function(t,s){return r._h.isUdf(n[t])?s:n[t]};if(this.optList={_stream:e("_stream",!0),_objReturn:e("_objReturn",!0),_objKeep:e("_objKeep",!1),_flow:e("_flow",!1),_flatten:e("_flatten",!1)},this.optStreamList={_start:null,_res:null,_end:null},s){n=n._option?n._option:n,this._this=n._this?n._this:null;var i=function(t){return r._h.isFn(t)?t():Object.keys(t).reduce(function(n,s){var e=t[s];return n[s]=r._h.isFn(e)?e():t[s],n},{})};n._args?r.applyArgs(i(n._args),!0):n._initArgs&&r.applyArgs(i(n._initArgs),!0),this._memoize=n._memoize===!1?!1:!0,Object.keys(r.optStreamList).forEach(function(t){n[t]&&(r.streamOpt.push(t),null===r.optStreamList[t]&&(r.optStreamList[t]=n[t]))}),t.shift()}return{args:t,argsToApply:r.argsToApply}},applyOpts:function(t,r){var s=this,e=function(t,r){for(var e=!0;e;){var i=t,o=r;u=a=f=void 0,e=!1;var u=n(o),a=u[0],f=u.slice(1);if(void 0===i)return;if(s._h.isArr(i)||(i=[i]),void 0===a)return i;t=a.apply(s._this,i),r=f,e=!0}},i=function(t,r){var n=s._h.memoize(function(t){return e(t,r)}),i=s._memoize?n:e;return t.map(function(t){var n=i(t,r);return!s._h.isUdf(n)&&n[0]?n[0]:void 0})},o=function(t,r){return s._h.isFn(r)?i(t,r):s._h.isObj(r)?i(t,Object.keys(r).map(function(t){return r[t]})):s._h.isArr(r)?i(t,r):void 0},u=function(t,r,n){return n=n.filter(function(t){return"_start"!==t&&"_res"!==t&&"_end"!==t?t:"_start"===t&&r._start?t:"_res"===t&&r._res?t:"_end"===t&&r._end?t:void 0}),n.reduce(function(t,r){return o(t,s.optStreamList[r])},t)},a=function(t,r,n){var e={_start:!1,_end:!1,_res:!1};return u.apply(s,[t,s._h.defaults(r,e),n])};return this.streamOpt.length?a(t,r,this.streamOpt):t},applyArgs:function(t){var r=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],n=this,s=!1;if(void 0!==t){var e=function(t){if(n.optList._flow)n.argsToApply._fnArgs.push(t);else if(n.optList._objReturn&&n._h.isObj(t)){var r=n.optList._objKeep;r=s?!r:r,n.argsToApply._fnArgs=Object.keys(t).map(function(n){var s;return r&&(s={},s[n]=t[n]),r?s:t[n]})}else t=n._h.isArr(t)?t:[t],n.argsToApply._fnArgs=t};if(r)e(t);else{var i=function(t){return n._h.isUdf(t)||(t._this&&(n._this=t._this,delete t._this),n._h.isUdf(t._objKeep)||(s=!0,delete t._objKeep)),t};e(function(){if(!n._h.isArr(t)){t=[i(t)];var r=n.applyOpts(t,{_res:!0});return r[0]}return n.applyOpts(i(t),{_res:!0})}()),n.argsToApply._fnArgs=n.optList._flatten?n._h.flatten(n.argsToApply._fnArgs):n.argsToApply._fnArgs,n.argsToApply._fnArgs=n.applyOpts(n.argsToApply._fnArgs,{_end:!0})}}},process:function(){var t=this;if(this.firstIsFn){var r=Object.keys(this.argsToApply).length?this.first.apply(this._this,t.applyOpts(this.argsToApply._fnArgs,{_start:!0})):this.first.call(this._this);return t.applyArgs(r),Object.keys(this.argsToApply).length&&this.rest.push(this.argsToApply),this.init.apply(t,this.rest)}if(t._h.isObj(this.first)&&this.first["return"]){var n=this.first["return"];return this._h.isFn(n)?n.apply(t._this,this.argsToApply._fnArgs||[]):n}return t._h.isObj(this.first)&&this.first._fnArgs?this.first._fnArgs.length?this.first._fnArgs:void 0:this.firstIsFn||this.firstIsUdf||null===this.first?t._h.isUdf(this.first)&&this.rest.length?(Object.keys(this.argsToApply).length&&this.rest.push(this.argsToApply),this.init.apply(t,this.rest)):this.rest.length?void console.warn("teFlow ERROR: Your not supposed to get here, if you do drop me a line."):Object.keys(this.argsToApply).length?this.argsToApply._fnArgs:void 0:(t.applyArgs(this.first),Object.keys(this.argsToApply).length&&this.rest.push(this.argsToApply),this.init.apply(t,this.rest))},getThis:function(){return this},_h:{flatten:function p(t){var p=function r(t,n){for(var s=0;s<t.length;s++){var e=t[s];Array.isArray(e)?r(e,n):n.push(e)}return n};return p(t,[])},defaults:function(){var t=[].concat(s.call(arguments)),r=t.shift();return a(r,t)},memoize:function(t){return u(t)},isFn:function(t){return i(t)},isObj:function(t){return o(t)},isArr:function(t){return e(t)},isUdf:function(t){return void 0===t}}};t.exports=function(){var t=Object.create(f),r=t.getThis(),n=[].concat(s.call(arguments));return n.length?t.init.apply(r,n):void 0}},function(t,exports){function r(t){return!!t&&"object"==typeof t}function n(t,r){var n=null==t?void 0:t[r];return o(n)?n:void 0}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&y>=t}function e(t){return i(t)&&l.call(t)==a}function i(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}function o(t){return null==t?!1:e(t)?_.test(h.call(t)):r(t)&&f.test(t)}var u="[object Array]",a="[object Function]",f=/^\[object .+?Constructor\]$/,p=Object.prototype,h=Function.prototype.toString,c=p.hasOwnProperty,l=p.toString,_=RegExp("^"+h.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),g=n(Array,"isArray"),y=9007199254740991,d=g||function(t){return r(t)&&s(t.length)&&l.call(t)==u};t.exports=d},function(t,exports){function r(t){return n(t)&&i.call(t)==s}function n(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}var s="[object Function]",e=Object.prototype,i=e.toString;t.exports=r},function(t,exports){function r(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}t.exports=r},function(t,exports){function r(){this.__data__={}}function n(t){return this.has(t)&&delete this.__data__[t]}function s(t){return"__proto__"==t?void 0:this.__data__[t]}function e(t){return"__proto__"!=t&&f.call(this.__data__,t)}function i(t,r){return"__proto__"!=t&&(this.__data__[t]=r),this}function o(t,r){if("function"!=typeof t||r&&"function"!=typeof r)throw new TypeError(u);var n=function(){var s=arguments,e=r?r.apply(this,s):s[0],i=n.cache;if(i.has(e))return i.get(e);var o=t.apply(this,s);return n.cache=i.set(e,o),o};return n.cache=new o.Cache,n}var u="Expected a function",a=Object.prototype,f=a.hasOwnProperty;r.prototype["delete"]=n,r.prototype.get=s,r.prototype.has=e,r.prototype.set=i,o.Cache=r,t.exports=o},function(t,exports,r){function n(t,r){return void 0===t?r:t}function s(t,r){return i(function(n){var s=n[0];return null==s?s:(n.push(r),t.apply(void 0,n))})}var e=r(6),i=r(15),o=s(e,n);t.exports=o},function(t,exports,r){function n(t,r,n){for(var s=-1,e=i(r),o=e.length;++s<o;){var u=e[s],a=t[u],f=n(a,r[u],u,t,r);(f===f?f===a:a!==a)&&(void 0!==a||u in t)||(t[u]=f)}return t}var s=r(7),e=r(12),i=r(9),o=e(function(t,r,e){return e?n(t,r,e):s(t,r)});t.exports=o},function(t,exports,r){function n(t,r){return null==r?t:s(r,e(r),t)}var s=r(8),e=r(9);t.exports=n},function(t,exports){function r(t,r,n){n||(n={});for(var s=-1,e=r.length;++s<e;){var i=r[s];n[i]=t[i]}return n}t.exports=r},function(t,exports,r){function n(t){return function(r){return null==r?void 0:r[t]}}function s(t){return null!=t&&i(d(t))}function e(t,r){return t="number"==typeof t||c.test(t)?+t:-1,r=null==r?y:r,t>-1&&t%1==0&&r>t}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&y>=t}function o(t){for(var r=a(t),n=r.length,s=n&&t.length,o=!!s&&i(s)&&(h(t)||p(t)),u=-1,f=[];++u<n;){var c=r[u];(o&&e(c,s)||_.call(t,c))&&f.push(c)}return f}function u(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}function a(t){if(null==t)return[];u(t)||(t=Object(t));var r=t.length;r=r&&i(r)&&(h(t)||p(t))&&r||0;for(var n=t.constructor,s=-1,o="function"==typeof n&&n.prototype===t,a=Array(r),f=r>0;++s<r;)a[s]=s+"";for(var c in t)f&&e(c,r)||"constructor"==c&&(o||!_.call(t,c))||a.push(c);return a}var f=r(10),p=r(11),h=r(1),c=/^\d+$/,l=Object.prototype,_=l.hasOwnProperty,g=f(Object,"keys"),y=9007199254740991,d=n("length"),v=g?function(t){var r=null==t?void 0:t.constructor;return"function"==typeof r&&r.prototype===t||"function"!=typeof t&&s(t)?o(t):u(t)?g(t):[]}:o;t.exports=v},function(t,exports){function r(t){return!!t&&"object"==typeof t}function n(t,r){var n=null==t?void 0:t[r];return i(n)?n:void 0}function s(t){return e(t)&&h.call(t)==o}function e(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}function i(t){return null==t?!1:s(t)?c.test(f.call(t)):r(t)&&u.test(t)}var o="[object Function]",u=/^\[object .+?Constructor\]$/,a=Object.prototype,f=Function.prototype.toString,p=a.hasOwnProperty,h=a.toString,c=RegExp("^"+f.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},function(t,exports){function r(t){return!!t&&"object"==typeof t}function n(t){return function(r){return null==r?void 0:r[t]}}function s(t){return null!=t&&e(p(t))}function e(t){return"number"==typeof t&&t>-1&&t%1==0&&f>=t}function i(t){return r(t)&&s(t)&&u.call(t,"callee")&&!a.call(t,"callee")}var o=Object.prototype,u=o.hasOwnProperty,a=o.propertyIsEnumerable,f=9007199254740991,p=n("length");t.exports=i},function(t,exports,r){function n(t){return i(function(r,n){var i=-1,o=null==r?0:n.length,u=o>2?n[o-2]:void 0,a=o>2?n[2]:void 0,f=o>1?n[o-1]:void 0;for("function"==typeof u?(u=s(u,f,5),o-=2):(u="function"==typeof f?f:void 0,o-=u?1:0),a&&e(n[0],n[1],a)&&(u=3>o?void 0:u,o=1);++i<o;){var p=n[i];p&&t(r,p,u)}return r})}var s=r(13),e=r(14),i=r(15);t.exports=n},function(t,exports){function r(t,r,s){if("function"!=typeof t)return n;if(void 0===r)return t;switch(s){case 1:return function(n){return t.call(r,n)};case 3:return function(n,s,e){return t.call(r,n,s,e)};case 4:return function(n,s,e,i){return t.call(r,n,s,e,i)};case 5:return function(n,s,e,i,o){return t.call(r,n,s,e,i,o)}}return function(){return t.apply(r,arguments)}}function n(t){return t}t.exports=r},function(t,exports){function r(t){return function(r){return null==r?void 0:r[t]}}function n(t){return null!=t&&i(f(t))}function s(t,r){return t="number"==typeof t||u.test(t)?+t:-1,r=null==r?a:r,t>-1&&t%1==0&&r>t}function e(t,r,e){if(!o(e))return!1;var i=typeof r;if("number"==i?n(e)&&s(r,e.length):"string"==i&&r in e){var u=e[r];return t===t?t===u:u!==u}return!1}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&a>=t}function o(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}var u=/^\d+$/,a=9007199254740991,f=r("length");t.exports=e},function(t,exports){function r(t,r){if("function"!=typeof t)throw new TypeError(n);return r=s(void 0===r?t.length-1:+r||0,0),function(){for(var n=arguments,e=-1,i=s(n.length-r,0),o=Array(i);++e<i;)o[e]=n[r+e];switch(r){case 0:return t.call(this,o);case 1:return t.call(this,n[0],o);case 2:return t.call(this,n[0],n[1],o)}var u=Array(r+1);for(e=-1;++e<r;)u[e]=n[e];return u[r]=o,t.apply(this,u)}}var n="Expected a function",s=Math.max;t.exports=r}])});