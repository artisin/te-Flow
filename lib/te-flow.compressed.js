!function(t,s){"object"==typeof exports&&"object"==typeof module?module.exports=s(require("lodash.isarray"),require("lodash.isfunction"),require("lodash.isobject"),require("lodash.memoize"),require("lodash.defaults")):"function"==typeof define&&define.amd?define(["lodash.isarray","lodash.isfunction","lodash.isobject","lodash.memoize","lodash.defaults"],s):"object"==typeof exports?exports.teFlow=s(require("lodash.isarray"),require("lodash.isfunction"),require("lodash.isobject"),require("lodash.memoize"),require("lodash.defaults")):t.teFlow=s(t["lodash.isarray"],t["lodash.isfunction"],t["lodash.isobject"],t["lodash.memoize"],t["lodash.defaults"])}(this,function(t,s,r,i,e){return function(t){function s(i){if(r[i])return r[i].exports;var e=r[i]={exports:{},id:i,loaded:!1};return t[i].call(e.exports,e,e.exports,s),e.loaded=!0,e.exports}var r={};return s.m=t,s.c=r,s.p="",s(0)}([function(t,exports,s){"use strict";function r(t){return Array.isArray(t)?t:Array.from(t)}var i=Array.prototype.slice,e=s(1),n=s(2),o=s(3),a=s(4),h=s(5),p={init:function(){var t=this;if(this.args=[].concat(i.call(arguments)),this.argsToApply={_fnArgs:[]},!this.count){this.count=1;var s=this.checkOpts(this.args);this.args=s.args,this.argsToApply=s.argsToApply}this.first=this.args.length?this.args.shift():null,this.rest=this.args,this.firstIsFn=t._h.isFn(t.first),this.firstIsUdf=t._h.isUdf(t.first);var r=this.rest[this.rest.length-1];return!t._h.isUdf(r)&&r._fnArgs&&(this.argsToApply._fnArgs=this.rest.pop()._fnArgs),this.process()},checkOpts:function(t){var s=this,r=t[0],i=this._h.isFn(r)?!1:this._h.isObj(r);this.streamOpt=[];var e=function(t,i){return s._h.isUdf(r[t])?i:r[t]};if(this.optList={_stream:e("_stream",!0),_objReturn:e("_objReturn",!0),_objKeep:e("_objKeep",!1),_flow:e("_flow",!1),_flatten:e("_flatten",!1)},this.optStreamList={_start:null,_res:null,_end:null},i){r=r._option?r._option:r,this._this=r._this?r._this:null;var n=function(t){return s._h.isFn(t)?t():Object.keys(t).reduce(function(r,i){var e=t[i];return r[i]=s._h.isFn(e)?e():t[i],r},{})};r._args?s.applyArgs(n(r._args),!0):r._initArgs&&s.applyArgs(n(r._initArgs),!0),this._memoize=r._memoize===!1?!1:!0,Object.keys(s.optStreamList).forEach(function(t){r[t]&&(s.streamOpt.push(t),null===s.optStreamList[t]&&(s.optStreamList[t]=r[t]))}),t.shift()}return{args:t,argsToApply:s.argsToApply}},applyOpts:function(t,s){var i=this,e=function(t,s){for(var e=!0;e;){var n=t,o=s;a=h=p=void 0,e=!1;var a=r(o),h=a[0],p=a.slice(1);if(void 0===n)return;if(i._h.isArr(n)||(n=[n]),void 0===h)return n;t=h.apply(i._this,n),s=p,e=!0}},n=function(t,s){var r=i._h.memoize(function(t){return e(t,s)}),n=i._memoize?r:e;return t.map(function(t){var r=n(t,s);return!i._h.isUdf(r)&&r[0]?r[0]:void 0})},o=function(t,s){return i._h.isFn(s)?n(t,s):i._h.isObj(s)?n(t,Object.keys(s).map(function(t){return s[t]})):i._h.isArr(s)?n(t,s):void 0},a=function(t,s,r){return r=r.filter(function(t){return"_start"!==t&&"_res"!==t&&"_end"!==t?t:"_start"===t&&s._start?t:"_res"===t&&s._res?t:"_end"===t&&s._end?t:void 0}),r.reduce(function(t,s){return o(t,i.optStreamList[s])},t)},h=function(t,s,r){var e={_start:!1,_end:!1,_res:!1};return a.apply(i,[t,i._h.defaults(s,e),r])};return this.streamOpt.length?h(t,s,this.streamOpt):t},applyArgs:function(t){var s=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],r=this,i=!1;if(void 0!==t){var e=function(t){if(r.optList._flow)r.argsToApply._fnArgs.push(t);else if(r.optList._objReturn&&r._h.isObj(t)){var s=r.optList._objKeep;s=i?!s:s,r.argsToApply._fnArgs=Object.keys(t).map(function(r){var i;return s&&(i={},i[r]=t[r]),s?i:t[r]})}else t=r._h.isArr(t)?t:[t],r.argsToApply._fnArgs=t};if(s)e(t);else{var n=function(t){return r._h.isUdf(t)||(t._this&&(r._this=t._this,delete t._this),r._h.isUdf(t._objKeep)||(i=!0,delete t._objKeep)),t};e(function(){if(!r._h.isArr(t)){t=[n(t)];var s=r.applyOpts(t,{_res:!0});return s[0]}return r.applyOpts(n(t),{_res:!0})}()),r.argsToApply._fnArgs=r.optList._flatten?r._h.flatten(r.argsToApply._fnArgs):r.argsToApply._fnArgs,r.argsToApply._fnArgs=r.applyOpts(r.argsToApply._fnArgs,{_end:!0})}}},process:function(){var t=this;if(this.firstIsFn){var s=Object.keys(this.argsToApply).length?this.first.apply(this._this,t.applyOpts(this.argsToApply._fnArgs,{_start:!0})):this.first.call(this._this);return t.applyArgs(s),Object.keys(this.argsToApply).length&&this.rest.push(this.argsToApply),this.init.apply(t,this.rest)}if(t._h.isObj(this.first)&&this.first["return"]){var r=this.first["return"];return this._h.isFn(r)?r.apply(t._this,this.argsToApply._fnArgs||[]):r}return t._h.isObj(this.first)&&this.first._fnArgs?this.first._fnArgs.length?this.first._fnArgs:void 0:this.firstIsFn||this.firstIsUdf||null===this.first?t._h.isUdf(this.first)&&this.rest.length?(Object.keys(this.argsToApply).length&&this.rest.push(this.argsToApply),this.init.apply(t,this.rest)):this.rest.length?void console.warn("teFlow ERROR: Your not supposed to get here, if you do drop me a line."):Object.keys(this.argsToApply).length?this.argsToApply._fnArgs:void 0:(t.applyArgs(this.first),Object.keys(this.argsToApply).length&&this.rest.push(this.argsToApply),this.init.apply(t,this.rest))},getThis:function(){return this},_h:{flatten:function u(t){var u=function s(t,r){for(var i=0;i<t.length;i++){var e=t[i];Array.isArray(e)?s(e,r):r.push(e)}return r};return u(t,[])},defaults:function(){var t=[].concat(i.call(arguments)),s=t.shift();return h(s,t)},memoize:function(t){return a(t)},isFn:function(t){return n(t)},isObj:function(t){return o(t)},isArr:function(t){return e(t)},isUdf:function(t){return void 0===t}}};t.exports=function(){var t=Object.create(p),s=t.getThis(),r=[].concat(i.call(arguments));return r.length?t.init.apply(s,r):void 0}},function(t,exports){t.exports=require("lodash.isarray")},function(t,exports){t.exports=require("lodash.isfunction")},function(t,exports){t.exports=require("lodash.isobject")},function(t,exports){t.exports=require("lodash.memoize")},function(t,exports){t.exports=require("lodash.defaults")}])});